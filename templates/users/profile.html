{% extends 'base.html'%}
{% load static %}
{% block title %} {{title}} {% endblock %}

{% block content %}
    <div class="profile-container">
        <div class="profile-main-info">
            <div class="block-content profile-main-info-padding">
                <div class="d-flex flex-column align-items-center text-center">
                    <div class="for-photo">
                        {% if user.image %}
                            <img src="{{user.image.url}}" alt="Admin" class="profile-photo" width="150" >
                        {% else %}
                            <img src="{% static 'img/avatar.png' %}"  style="width:100%;">
                        {% endif %}
                    </div>
                </div>
                <div class="profile-main-text">
                    <h3>{{user.username}}</h3>
                    <p class="lead">{{user.email}}</p>
                    <p class="">{{user.profile.bio}}</p>
                </div>
                <div class="">
                    <ul class="social-media-list">
                        <li class="social-media-item">
                            <div class="for-social-media">
                                <div class="social-media">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github mr-2 icon-inline"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                                </div>
                                <h5 class="social-media-title">Github</h5>
                            </div>
                            <span class="">https://www.github.com/
                                {% if request.user.github %}
                                    {{request.user.github}}
                                {% else %}
                                    example
                                {% endif %}
                            </span>
                        </li>
                        <li class="social-media-item">
                            <div class="for-social-media">
                                <div class="social-media">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter mr-2 icon-inline text-info"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
                                </div>
                                <h5 class="social-media-title">Twitter</h5>
                            </div>
                            <span class="">@
                                {% if request.user.twitter %}
                                {{request.user.twitter}}
                                {% else %}
                                    example
                                {% endif %}
                        </span>
                        </li>
                        <li class="social-media-item">
                            <div class="for-social-media">
                                <div class="social-media">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-instagram mr-2 icon-inline text-danger"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                                </div>
                                <h5 class="social-media-title">Instagram</h5>
                            </div>
                            <span class="">https://www.instagram.com/
                                {% if request.user.instagram %}
                                    {{request.user.instagram}}
                                {% else %}
                                    example
                                {% endif %}
                            </span>
                        </li>
                        <li class="social-media-item">
                            <div class="for-social-media">
                                <div class="social-media">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook mr-2 icon-inline text-primary"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                                </div>
                                <h5 class="social-media-title">Facebook</h5>
                            </div>
                            <span class="">https://www.facebook.com/
                                {% if request.user.facebook%}
                                    {{request.user.facebook}}
                                {% else %}
                                    example
                                {% endif %}
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class='profile-secondary-info'>
            <div class='block-content profile-secondary-info-padding'>
                <div class="info-row">
                    <div class="col-sm-3">
                        <h5 class="mb-0">Full Name</h5>
                    </div>
                    <div class="">
                        {% if request.user.get_full_name %}
                            {{request.user.get_full_name}}
                        {% endif %}
                    </div>
                </div>
                <hr class="hr-profile">
                <div class="info-row">
                    <div class="col-sm-3">
                        <h5 class="mb-0">Email</h5>
                    </div>
                    <div class="">
                        {% if request.user.email %}
                            {{request.user.email}}
                        {% endif %}
                    </div>
                </div>
                <hr class="hr-profile">
                <div class="info-row">
                    <div class="col-sm-3">
                        <h5 class="mb-0">Phone number</h5>
                    </div>
                    <div class="">
                        {% if request.user.phone %}
                            {{request.user.phone}}
                        {% endif %}
                    </div>
                </div>
                <hr class="hr-profile">
                <div class="info-row">
                    <div class="col-sm-3">
                        <h5 class="mb-0">Address</h5>
                    </div>
                    <div class="">
                        {% if request.user.address %}
                            {{request.user.address}}
                        {% endif %}
                    </div>
                </div>
                <hr class="hr-profile">
                <div class="for-edit-profile-btn">
                    <a class="button-outline-card edit-profile-btn" href="{% url 'profile_edit' %}">Edit</a>
                </div>
            </div>
            {% if request.user.is_admin %}
            <div class="block-content products-admin-block">
                <a href="{% url 'create_product' %}" class="green-outline-button-profile view-products-btn">Create new product</a>
                <a href="{% url 'create_article' %}" class="orange-button create-product-btn">Create new article</a>
            </div>
            <div class="block-content products-admin-block">
                <a href="{% url 'all_books' %}" class="green-outline-button-profile view-products-btn">View products</a>
                <a href="{% url 'all_articles' %}" class="orange-button view-articles-btn-admin">View articles</a>
                <a href="{% url 'all_users' %}" class="green-outline-button-profile create-product-btn">View users</a>
            </div>
            <div class="block-content products-admin-block">
                <a href="{% url 'all_categories' %}" class="green-outline-button-profile view-products-btn">View categories</a>
                <a href="{% url 'create_category' %}" class="orange-button create-product-btn">Create category</a>
            </div>
            <div class="block-content products-admin-block">
                <a href="{% url 'all_tags' %}" class="green-outline-button-profile view-products-btn">View tags</a>
                <a href="{% url 'create_tag' %}" class="orange-button create-product-btn">Create tag</a>
            </div>
            {% else %}
            <div class="block-content products-admin-block">
                <a href="{% url 'user_books' request.user.id %}" class="green-outline-button-profile view-products-btn">View my products</a>
                <a href="{% url 'create_product' %}" class="orange-button create-product-btn">Create new product</a>
            </div>
            <div class="block-content products-admin-block">
                <a href="{% url 'user_articles' request.user.id %}" class="green-outline-button-profile view-products-btn">View my articles</a>
                <a href="{% url 'create_article' %}" class="orange-button create-product-btn">Create new article</a>
            </div>
            {% endif %}
        </div>
    </div>
    <div class='block-content table-container' style="margin-top: var(--padding-l);">
        <h2>Your orders</h2>
        <table class="table-custom lead">
            <thead>
                <tr class="table-head">
                    <th scope="col">Order</th>
                    
                    <th scope="col">Date</th>
                    <th scope="col">Status</th>
                    <th scope="col">Paid</th>
                    <th scope="col">Total</th>
                </tr>
            </thead>
            <tbody>
            {% for order in orders %}
                {% if order.status == 'in_progress' or order.status == 'in_delivery' or order.status == 'waiting_for_payment' %}
                    <tr style="color:var(--main-color-two);">
                {% elif order.status == 'completed' %}
                    <tr style="color:var(--main-color-one);">
                {% elif order.status == 'canceled' %}
                    <tr style="color: #ff4242;">
                {% endif %}
                    <th scope="row">{{ order.id }}</th>
                        <td>{{ order.created_at }}</td>
                        <td>{{ order.get_status }}</td>
                        <td>
                            {% if order.paid %}
                            Yes
                            {% else %}
                            No
                            {% endif %}
                        </td>
                        <td>{{ order.total }} $</td>
                    </tr>
            {% endfor %}
                
            </tbody>
        </table>
    </div>
{% endblock %}